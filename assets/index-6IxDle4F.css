@import"https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Noto+Sans+TC:wght@100..900&display=swap";:root{--color-primary: #4CAF50;--color-primary-light: #66BB6A;--color-primary-dark: #388E3C;--color-secondary: #2196F3;--color-secondary-light: #42A5F5;--color-secondary-dark: #1976D2;--color-warning: #FFC107;--color-warning-light: #FFD54F;--color-danger: #F44336;--color-danger-light: #EF5350;--color-success: #4CAF50;--color-info: #2196F3;--color-grass: #4CAF50;--color-grass-light: #66BB6A;--color-bug: #8BC34A;--color-bug-light: #AED581;--color-frog: #26A69A;--color-frog-light: #4DB6AC;--color-snake: #795548;--color-snake-light: #A1887F;--color-eagle: #F44336;--color-eagle-light: #EF5350;--bg-primary: rgba(255, 255, 255, .95);--bg-secondary: rgba(255, 255, 255, .9);--bg-overlay: rgba(0, 0, 0, .1);--bg-overlay-dark: rgba(0, 0, 0, .7);--text-primary: #333;--text-secondary: #666;--text-tertiary: #999;--text-inverse: #fff;--spacing-xs: 4px;--spacing-sm: 8px;--spacing-md: 16px;--spacing-lg: 24px;--spacing-xl: 32px;--border-radius-sm: 4px;--border-radius-md: 8px;--border-radius-lg: 16px;--border-radius-xl: 30px;--border-radius-full: 50%;--border-width: 2px;--border-color: rgba(0, 0, 0, .1);--shadow-sm: 0 2px 4px rgba(0, 0, 0, .1);--shadow-md: 0 4px 8px rgba(0, 0, 0, .15);--shadow-lg: 0 8px 16px rgba(0, 0, 0, .2);--shadow-none: none;--blur-sm: blur(4px);--blur-md: blur(8px);--blur-lg: blur(12px);--transition-fast: .15s ease;--transition-normal: .3s ease;--transition-slow: .5s ease;--z-base: 1;--z-overlay: 100;--z-modal: 200;--z-tooltip: 300;--z-max: 9999}*{font-family:Inter,Noto Sans TC,sans-serif}body{margin:0;padding:0;overflow:hidden;font-weight:600;background:linear-gradient(180deg,#87ceeb,#98d8c8,#a8e6cf,#b8e0d2,#c8e6c9,#d4e6d1);background-attachment:fixed;position:relative}body:before{content:"";position:fixed;top:0;left:0;width:100%;height:100%;background-image:radial-gradient(circle at 20% 30%,rgba(255,255,255,.1) 0%,transparent 50%),radial-gradient(circle at 80% 70%,rgba(139,206,235,.15) 0%,transparent 50%),radial-gradient(circle at 50% 50%,rgba(152,216,200,.1) 0%,transparent 50%);pointer-events:none;z-index:0}#simulation-container{position:relative;width:100vw;height:100vh;overflow:hidden;background:transparent;z-index:var(--z-base)}.controls-bar{position:absolute;bottom:20px;left:50%;transform:translate(-50%);background-color:var(--bg-secondary);border:var(--border-width) solid rgba(255,255,255,.8);-webkit-backdrop-filter:var(--blur-md);backdrop-filter:var(--blur-md);padding:var(--spacing-sm);border-radius:var(--border-radius-xl);z-index:var(--z-overlay);display:flex;justify-content:center;align-items:center;gap:var(--spacing-sm);box-shadow:var(--shadow-md)}.controls-bar .line{font-weight:500;color:#aaa;opacity:.5;font-size:12px}.controls-bar .controls-btn{cursor:pointer;border-radius:20px;border:0;background:#4caf50cc;display:flex;justify-content:center;align-items:center;gap:var(--spacing-xs);color:var(--text-inverse);font-weight:600;transition:all var(--transition-normal);height:36px;min-width:36px}.controls-bar .controls-btn i{pointer-events:none}.controls-bar .controls-btn:hover{background:#4caf50;transform:scale(1.05)}.controls-bar #startBtn,.controls-bar #resetBtn{font-size:16px;width:36px}.controls-bar #startBtn.running{background:#f44336cc}.controls-bar #startBtn.running:hover{background:#f44336}.controls-bar #speedBtn{width:50px;font-size:14px}@media (max-width: 920px){.controls-bar .controls-btn{width:36px;padding:0}}.stats-box{position:absolute;top:12px;right:12px;background-color:var(--bg-secondary);border:var(--border-width) solid rgba(255,255,255,.8);-webkit-backdrop-filter:var(--blur-md);backdrop-filter:var(--blur-md);padding:var(--spacing-sm);border-radius:var(--border-radius-lg);z-index:var(--z-overlay);color:var(--text-primary);display:flex;justify-content:center;align-items:center;gap:var(--spacing-md);font-variant-numeric:tabular-nums;box-shadow:var(--shadow-md)}.stats-box .type-tag{width:28px;height:28px;border-radius:var(--border-radius-full);display:inline-flex;justify-content:center;align-items:center;color:var(--text-inverse);margin-right:6px;font-size:14px;box-shadow:var(--shadow-sm)}.stats-box .type-tag.grass-tag{background:linear-gradient(135deg,var(--color-grass),var(--color-grass-light))}.stats-box .type-tag.bug-tag{background:linear-gradient(135deg,var(--color-bug),var(--color-bug-light))}.stats-box .type-tag.frog-tag{background:linear-gradient(135deg,var(--color-frog),var(--color-frog-light))}.stats-box .type-tag.snake-tag{background:linear-gradient(135deg,var(--color-snake),var(--color-snake-light))}.stats-box .type-tag.eagle-tag{background:linear-gradient(135deg,var(--color-eagle),var(--color-eagle-light))}.add-controls-bar{position:absolute;bottom:80px;left:50%;transform:translate(-50%);background-color:var(--bg-secondary);border:var(--border-width) solid rgba(255,255,255,.8);-webkit-backdrop-filter:var(--blur-md);backdrop-filter:var(--blur-md);padding:var(--spacing-sm);border-radius:var(--border-radius-xl);z-index:var(--z-overlay);display:flex;justify-content:center;align-items:center;gap:10px;box-shadow:var(--shadow-md)}.add-controls-bar .type-btn{font-size:20px;cursor:pointer;width:48px;height:48px;border-radius:var(--border-radius-full);border:0;background:#c8c8c899;transition:all var(--transition-normal);display:flex;justify-content:center;align-items:center;box-shadow:var(--shadow-sm)}.add-controls-bar .type-btn i{color:var(--text-inverse);font-size:1.4rem}.add-controls-bar .type-btn:hover{transform:scale(1.15);box-shadow:var(--shadow-md)}.add-controls-bar .type-btn.grass-btn{background:linear-gradient(135deg,var(--color-grass),var(--color-grass-light))}.add-controls-bar .type-btn.bug-btn{background:linear-gradient(135deg,var(--color-bug),var(--color-bug-light))}.add-controls-bar .type-btn.frog-btn{background:linear-gradient(135deg,var(--color-frog),var(--color-frog-light))}.add-controls-bar .type-btn.snake-btn{background:linear-gradient(135deg,var(--color-snake),var(--color-snake-light))}.add-controls-bar .type-btn.eagle-btn{background:linear-gradient(135deg,var(--color-eagle),var(--color-eagle-light))}.add-controls-bar .type-btn.active{box-shadow:inset 0 0 0 4px #fffc,var(--shadow-md);transform:scale(1.1)}.add-controls-bar #clearModeBtn{background:#9e9e9e99;margin-left:var(--spacing-sm)}.add-controls-bar #clearModeBtn:hover{background:#9e9e9ecc}.sidebar-panel{position:fixed;left:0;top:0;width:280px;min-width:280px;max-width:280px;height:100vh;background:var(--bg-primary);-webkit-backdrop-filter:var(--blur-md);backdrop-filter:var(--blur-md);border-right:var(--border-width) solid var(--border-color);z-index:var(--z-modal);transition:transform var(--transition-normal);box-shadow:var(--shadow-lg);overflow-y:auto;box-sizing:border-box}.sidebar-panel.collapsed{transform:translate(-260px)}.sidebar-header{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md);border-bottom:1px solid var(--border-color);position:relative;z-index:10}.sidebar-toggle-floating{position:fixed;left:0;top:0;width:50px;height:60px;display:flex;align-items:center;justify-content:center;background:var(--bg-primary);-webkit-backdrop-filter:var(--blur-md);backdrop-filter:var(--blur-md);border-right:var(--border-width) solid var(--border-color);border-bottom:var(--border-width) solid var(--border-color);box-shadow:var(--shadow-lg);z-index:202;pointer-events:auto}.sidebar-header h3{margin:0;font-size:18px;color:var(--text-primary);font-weight:700}.sidebar-toggle{background:none;border:none;cursor:pointer;font-size:16px;color:var(--text-secondary);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius-sm);transition:all var(--transition-fast)}.sidebar-toggle:hover{background:var(--bg-overlay);color:var(--text-primary)}.sidebar-panel.collapsed .sidebar-toggle i{transform:rotate(180deg)}.sidebar-content{padding:var(--spacing-md)}.control-group{margin-bottom:var(--spacing-lg)}.control-group h4{margin:0 0 var(--spacing-sm) 0;font-size:14px;color:var(--text-secondary);font-weight:600}.slider-control,.checkbox-control{margin-bottom:var(--spacing-md)}.checkbox-control label{display:flex;align-items:center;gap:var(--spacing-sm);font-size:13px;color:var(--text-secondary);cursor:pointer}.checkbox-control input[type=checkbox]{width:18px;height:18px;cursor:pointer;accent-color:var(--color-primary)}.control-hint{margin:var(--spacing-xs) 0 0 26px;font-size:11px;color:var(--text-tertiary);font-style:italic}.min-counts-controls{margin-top:var(--spacing-sm);padding:var(--spacing-sm);background:#00000005;border-radius:var(--border-radius-md);border:1px solid var(--border-color)}.min-counts-controls h5{margin:0 0 var(--spacing-sm) 0;font-size:13px;color:var(--text-secondary);font-weight:600}.min-count-value{font-weight:700;color:var(--color-primary);min-width:30px;display:inline-block;text-align:right}.slider-control label{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-sm);font-size:13px;color:var(--text-secondary)}.slider-control input[type=range]{width:100%;height:6px;border-radius:3px;background:#e0e0e0;outline:none;-webkit-appearance:none;appearance:none;-moz-appearance:none}.slider-control input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;-moz-appearance:none;width:18px;height:18px;border-radius:var(--border-radius-full);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));cursor:pointer;box-shadow:var(--shadow-sm);transition:all var(--transition-fast)}.slider-control input[type=range]::-webkit-slider-thumb:hover{transform:scale(1.2);box-shadow:var(--shadow-md)}.slider-control input[type=range]::-moz-range-thumb{width:18px;height:18px;border-radius:var(--border-radius-full);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));cursor:pointer;border:none;box-shadow:var(--shadow-sm)}.action-btn{width:100%;padding:var(--spacing-sm);margin-bottom:var(--spacing-sm);border:none;border-radius:var(--border-radius-md);cursor:pointer;font-size:14px;font-weight:600;color:var(--text-inverse);display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm);transition:all var(--transition-normal);box-shadow:var(--shadow-sm)}.action-btn:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn:active{transform:translateY(0)}.action-btn.rain-btn{background:linear-gradient(135deg,var(--color-secondary),var(--color-secondary-light))}.action-btn.meteor-btn{background:linear-gradient(135deg,#ff9800,#ffb74d)}.action-btn.meteor-btn.active{background:linear-gradient(135deg,var(--color-danger),var(--color-danger-light));animation:pulse 1s ease infinite}.action-btn.plague-btn{background:linear-gradient(135deg,#9c27b0,#ba68c8)}.mode-switch-group{border-bottom:2px solid #e0e0e0;padding-bottom:var(--spacing-md);margin-bottom:20px}.mode-buttons{display:flex;gap:var(--spacing-sm);margin-bottom:var(--spacing-sm)}.mode-btn{flex:1;padding:10px var(--spacing-md);border:var(--border-width) solid #ddd;border-radius:var(--border-radius-md);background:#f5f5f5;color:var(--text-secondary);font-size:13px;font-weight:600;cursor:pointer;transition:all var(--transition-normal);display:flex;align-items:center;justify-content:center;gap:6px}.mode-btn:hover{background:#e8e8e8;border-color:#bbb;transform:translateY(-1px)}.mode-btn.active{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-color:#667eea;box-shadow:var(--shadow-md)}.mode-btn.active:hover{background:linear-gradient(135deg,#5568d3,#653a8f);transform:translateY(-2px);box-shadow:var(--shadow-lg)}body.meteor-mode,body.meteor-mode #simulation-container{cursor:crosshair!important}.analytics-panel{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:90vw;max-width:1200px;max-height:90vh;background:#fffffffa;-webkit-backdrop-filter:var(--blur-md);backdrop-filter:var(--blur-md);border-radius:12px;box-shadow:var(--shadow-lg);z-index:3000;display:flex;flex-direction:column;overflow:hidden}.analytics-header{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:var(--border-width) solid var(--border-color);background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.analytics-header h3{margin:0;font-size:20px;font-weight:700}.close-btn{background:#fff3;border:none;color:#fff;width:32px;height:32px;border-radius:var(--border-radius-full);cursor:pointer;font-size:18px;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast)}.close-btn:hover{background:#ffffff4d;transform:scale(1.1)}.analytics-content{padding:20px;overflow-y:auto;flex:1}.chart-container{margin-bottom:30px;background:#fff;padding:24px;border-radius:var(--border-radius-md);box-shadow:0 2px 8px #0000001a;border:1px solid rgba(0,0,0,.05)}.chart-container h4{margin:0 0 20px;font-size:18px;color:var(--text-primary);font-weight:700;padding-bottom:12px;border-bottom:2px solid #f0f0f0}.chart-container canvas{min-height:350px;max-height:400px}.title-screen{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:var(--z-max);background-color:#1a1a2e;overflow:hidden;display:flex;flex-direction:column;justify-content:center;align-items:center}.title-bg{width:100%;height:100%;object-fit:cover;pointer-events:none;position:absolute;top:0;left:0}.start-button{position:absolute;bottom:-28%;left:1%;transform:translate(0);z-index:10;padding:36px 100px;font-size:40px;font-weight:600;color:var(--text-inverse);background:linear-gradient(135deg,#ff6b9d,#c44569,#a83a5b);border:none;border-radius:60px;cursor:pointer;display:flex;align-items:center;gap:20px;transition:all var(--transition-normal);box-shadow:0 10px 30px #ff6b9d66,var(--shadow-md);position:relative;overflow:hidden}.start-button:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.5),transparent);transition:left .6s ease}.start-button:hover:before{left:100%}.start-button:hover{transform:translate(0) translateY(-6px) scale(1.08);background:linear-gradient(135deg,#ff7ba8,#d4567a,#b84a6c);box-shadow:0 15px 40px #ff6b9d80,var(--shadow-lg)}.start-button:active{transform:translate(0) translateY(-1px) scale(1.02);box-shadow:0 6px 20px #ff6b9d66,var(--shadow-sm)}.start-button-text{position:relative;z-index:1;text-shadow:0 2px 4px rgba(0,0,0,.3);letter-spacing:1px}.start-button i{position:relative;z-index:1;font-size:36px;transition:transform var(--transition-normal)}.start-button:hover i{transform:translate(5px)}.entity{position:absolute;width:40px;height:40px;border-radius:var(--border-radius-full);display:flex;justify-content:center;align-items:center;font-size:24px;-webkit-user-select:none;user-select:none;transition:opacity var(--transition-normal),transform var(--transition-fast);color:var(--text-inverse);font-weight:400;cursor:pointer}.entity:hover{transform:scale(1.1);z-index:10}.entity.grass{background:linear-gradient(135deg,var(--color-grass),var(--color-grass-light))}.entity.bug{background:linear-gradient(135deg,var(--color-bug),var(--color-bug-light))}.entity.frog{background:linear-gradient(135deg,var(--color-frog),var(--color-frog-light))}.entity.snake{background:linear-gradient(135deg,var(--color-snake),var(--color-snake-light))}.entity.eagle{background:linear-gradient(135deg,var(--color-eagle),var(--color-eagle-light))}.entity.remove-highlight{box-shadow:inset 0 0 0 4px var(--color-danger)!important;animation:shake var(--transition-fast) ease;opacity:.5}@keyframes shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}.entity.invincible{box-shadow:inset 0 0 0 3px #fff9;animation:pulse 1s ease infinite}@keyframes pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.entity.reproducing{box-shadow:0 0 10px #ffd70080,inset 0 0 0 2px #ffd70066!important;animation:glow 2s ease-in-out infinite}@keyframes glow{0%,to{box-shadow:0 0 10px #ffd70080,inset 0 0 0 2px #ffd70066}50%{box-shadow:0 0 15px #ffd700b3,inset 0 0 0 2px #ffd70080}}.field-effect{position:fixed;top:0;left:0;width:100vw;height:100vh;pointer-events:none;z-index:var(--z-max)}.rain-effect{overflow:hidden;position:relative}.rain-drops{position:absolute;width:100%;height:100%;z-index:1}.rain-drop{position:absolute;background:linear-gradient(to bottom,#c8dcf0f2,#add8e6d9 30%,#87cefabf 70%,#87cefa80);animation:rainFall ease-in infinite;border-radius:2px;will-change:transform}.rain-drop-large{width:4px;height:45px;opacity:.95}.rain-drop-medium{width:2.5px;height:30px;opacity:.85}.rain-drop-small{width:1.5px;height:18px;opacity:.65}.rain-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#c8dcf026,#b4c8dc33 30%,#a0b4c82e 70%,#8ca0b426);pointer-events:none;z-index:0;animation:rainMist 3s ease-in-out infinite}@keyframes rainMist{0%,to{opacity:.4}50%{opacity:.6}}@keyframes rainFall{0%{transform:translateY(-5vh) translate(0) rotate(8deg);opacity:.6}5%{opacity:1;transform:translateY(0) translate(calc(var(--wind-offset, 0px) * .3)) rotate(10deg)}50%{transform:translateY(50vh) translate(calc(var(--wind-offset, 0px) * .6)) rotate(12deg);opacity:1}95%{opacity:1;transform:translateY(100vh) translate(calc(var(--wind-offset, 0px) * .8)) rotate(14deg)}to{transform:translateY(105vh) translate(var(--wind-offset, 0px)) rotate(15deg);opacity:.6}}.meteor-effect{pointer-events:none}.meteor-explosion{position:absolute;width:200px;height:200px;pointer-events:none}.meteor-core{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:30px;height:30px;background:radial-gradient(circle,gold,#ff8c00,#ff4500);border-radius:var(--border-radius-full);animation:meteorPulse .3s ease-out;box-shadow:0 0 20px #ff4500}.meteor-ring{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border:3px solid;border-radius:var(--border-radius-full);animation:meteorExpand 1s ease-out}.meteor-ring.ring-1{width:60px;height:60px;border-color:#ffd700cc;animation-delay:0s}.meteor-ring.ring-2{width:100px;height:100px;border-color:#ff8c0099;animation-delay:.1s}.meteor-ring.ring-3{width:150px;height:150px;border-color:#ff450066;animation-delay:.2s}@keyframes meteorPulse{0%{transform:translate(-50%,-50%) scale(0);opacity:1}50%{transform:translate(-50%,-50%) scale(1.5);opacity:.8}to{transform:translate(-50%,-50%) scale(1);opacity:0}}@keyframes meteorExpand{0%{transform:translate(-50%,-50%) scale(0);opacity:1}to{transform:translate(-50%,-50%) scale(2);opacity:0}}.plague-effect{overflow:hidden}.plague-particles{position:absolute;width:100%;height:100%}.plague-particle{position:absolute;width:8px;height:8px;background:radial-gradient(circle,#8b4513cc,#a0522d99,#8b45134d);border-radius:var(--border-radius-full);animation:plagueFloat ease-in-out infinite}@keyframes plagueFloat{0%,to{transform:translate(0) scale(1);opacity:.6}25%{transform:translate(10px,-10px) scale(1.2);opacity:.8}50%{transform:translate(-5px,-20px) scale(.8);opacity:1}75%{transform:translate(-10px,-10px) scale(1.1);opacity:.7}}.hide{display:none}
